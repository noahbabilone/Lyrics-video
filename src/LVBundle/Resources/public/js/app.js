var player, time_update_interval = 0;var PLAY = 0, INDEX = 0, START, END;var query = document.querySelector.bind(document);// var DataVideo = [//     {"start": "00:00:00", "end": "00:00:08", "text": "(Commence à 8 secondes)"},//     {"start": "00:00:08", "end": "00:00:14", "text": "Je garde un œil sur toi, Même si tu crois qu'c'est faux"},//     {//         "start": "00:00:14",//         "end": "00:00:20",//         "text": "Je garde un œil sur toi, tu es différente des autres <br> Surtout ne t’inquiète pas"//     },//     {//         "start": "00:00:20",//         "end": "00:00:27",//         "text": "D'ici je surveille ton dos, mais tout ça je n'te le dis pas,<br> Je suis du genre à faire profil bas"//     },//     {//         "start": "00:00:27",//         "end": "00:00:32",//         "text": "Tu veux que je délaisse la musique et le ness-bi, Canon sur la tempe tu me braques pour un baby"//     },//     {//         "start": "00:00:32",//         "end": "00:00:37",//         "text": "Continuer tout seul ou ensemble, j'ai déjà choisi<br> Si t'es prête à prendre quelques risques allons-y <br> Mais tu sais..."//     },////     {//         "start": "00:00:37",//         "end": "00:00:47",//         "text": "J'te ralentis car j'ai peur d'échouer, c'est compliqué <br>  Je ne suis qu'un homme, difficile d'avouer que j'suis piqué"//     },//     {//         "start": "00:00:47",//         "end": "00:00:56",//         "text": "Reste en retrait, ne viens pas me demander de t'expliquer <br>  Faut m'excuser, mais demain"//     },//     {"start": "00:00:56", "end": "00:01:05", "text": "Aime-moi demain, demain hé <br> Aime-moi demain, demain"},//     {//         "start": "00:01:05",//         "end": "00:01:12",//         "text": "Aime-moi demain <br> Aujourd'hui c'est la merde dans ma life. Donc aime moi demain, Oh oh ah"//     },//////     {//         "start": "00:01:13",//         "end": "00:01:23",//         "text": "C'est compliqué dans ma vie laisse-moi faire les choses.<br> Nous deux c'est fini laisse-moi faire une pause"//     },//     {//         "start": "00:01:23",//         "end": "00:01:31",//         "text": "C'qui nous sépare mon amour c'est les billets mauves <br> Ainsi va la vie ne crois pas qu'tout est rose"//     },//     {//         "start": "00:01:31",//         "end": "00:01:36",//         "text": "Et si tu veux partir c'est maintenant. <br> J'te remplacerai jamais par une autre"//     },//     {//         "start": "00:01:36",//         "end": "00:01:41",//         "text": "On s'aime, on s'fait la guerre mais pourtant. <br> On s'rejette souvent, oui, la faute sur l'autre"//     },////     {//         "start": "00:01:41",//         "end": "00:01:52",//         "text": "J'te ralentis car j'ai peur d'échouer, c'est compliqué <br>  Je ne suis qu'un homme, difficile d'avouer que j'suis piqué"//     },//     {//         "start": "00:01:52",//         "end": "00:02:01",//         "text": "Reste en retrait, ne viens pas me demander de t'expliquer <br>  Faut m'excuser, mais demain"//     },//     {"start": "00:02:01", "end": "00:02:10", "text": "Aime-moi demain, demain hé <br> Aime-moi demain, demain"},//     {//         "start": "00:02:10",//         "end": "00:02:19",//         "text": "Aime-moi demain <br> Aujourd'hui c'est la merde dans ma life. Donc aime moi demain, Oh oh ah"//     },//////     {//         "start": "00:02:18",//         "end": "00:02:27",//         "text": " Même si j'évite les coups du sort <br> Aime-moi demain parce qu'aujourd'hui je n'trouve plus de fille bien (Stop)"//     },////     {//         "start": "00:02:27",//         "end": "00:02:36",//         "text": "Pardonne-moi si j'ai eu tort, tort de m'imposer, la sagesse d'oser"//     },//     {//         "start": "00:02:36",//         "end": "00:02:40",//         "text": "De paraître trop sûr de moi-même, autant j'ai mes joies, autant j'ai mes peines "//     },//     {//         "start": "00:02:40",//         "end": "00:02:42",//         "text": "Au cœur en effet, j'connais mes faiblesses, je ne suis pas si mauvais"//     },//     {//         "start": "00:02:42",//         "end": "00:02:50",//         "text": "Mais ceux à qui j'ai donné me détestent <br> Si je réussi tu m'aimeras demain. Mais m'aimais-tu hier?"//     },//     {//         "start": "00:02:50",//         "end": "00:02:55",//         "text": "Quand j'te demande de me tendre la main, Tu b-b-g-g-g-bégaye"//     },////     {//         "start": "00:02:55",//         "end": "00:03:04",//         "text": "J'te ralentis car j'ai peur d'échouer, c'est compliqué <br> Je ne suis qu'un homme, difficile d'avouer que j'suis piqué"//     },//     {//         "start": "00:03:04",//         "end": "00:03:13",//         "text": "Reste en retrait, ne viens pas me demander de t'expliquer <br> Faut m'excuser, mais demain"//     },//     {"start": "00:03:13", "end": "00:03:22", "text": "Aime-moi demain, demain hé <br> Aime-moi demain, demain"},//     {//         "start": "00:03:22",//         "end": "00:03:31",//         "text": "Aime-moi demain <br> Aujourd'hui c'est la merde dans ma life. Donc aime moi demain, Oh oh ah"//     },//     {"start": "00:03:31", "end": "00:03:42", "text": "Demain, Demain <br> Aime moi demain yeah, Demain (2x)"},//     {//         "start": "00:03:42",//         "end": "00:03:48",//         "text": "Aime-moi demain <br> Aujourd'hui c'est la merde dans ma life. Donc aime moi demain, Oh oh ah"//     },//     {//         "start": "00:03:48",//         "end": "00:03:50",//         "text": "YannDev (Noahbabilone)"//     },// ]var data = $("#data-video").attr("data-video");//obj = JSON.parse('{"data":'+data+'}');var DataVideo = $.parseJSON(data);console.log(DataVideo);function onYouTubeIframeAPIReady() {    player = new YT.Player('youtube-video', {        width: 600,        height: 500,        videoId: 'vb4a7wgAVeo',        playerVars: {            'autoplay': 0, 'controls': 1, 'autohide': 0, 'wmode': 'opaque'            // playlist: 'u1gpkOSYntY,L56Q6ZdpZzc',        },        events: {            onReady: onPlayerReady,            onStateChange: onPlayerStateChange        }    });}var ready = false;function onPlayerReady() {    START = formatTimeVideo(DataVideo[0].start);    END = formatTimeVideo(DataVideo[0].end);    $('.sous-titre').removeClass("hide");    $("#signal-icon").addClass("fa-play");    updateTimerDisplay();}function onPlayerStateChange(event) {    if (event.data == YT.PlayerState.PLAYING) {        $('.sous-titre').html(DataVideo[INDEX].text);        ready = true;        time_update_interval = setInterval(function () {            updateTimerDisplay();            updateLyricsDisplay();        }, 100)        $("#signal-icon").addClass("fa-play").removeClass("fa-pause");    } else {        //Video has paused and clear any old interval.        clearInterval(time_update_interval);        updateLyricsDisplay();        $("#signal-icon").addClass("fa-pause").removeClass("fa-play");    }}function formatTimeVideo(chaine) {    var time = chaine.split(":");    return (time.length >= 3) ?    parseInt(time[0] * 3600) + parseInt(time[1] * 60) + parseInt(time[2]) : null;}function updateLyricsDisplay() {    var time = Math.round(player.getCurrentTime());    //console.log("UpdatLD ==> START :" + DataVideo[INDEX].start + "  End :" + DataVideo[INDEX].end + '  INDEX: ' + INDEX);    console.log("time_update_interval :" + time_update_interval);    if (time < START) {        seekLyrics(time, 0, INDEX);        // console.log("INFERIEUR");    } else if (time >= END && INDEX < DataVideo.length) {        seekLyrics(time, INDEX, DataVideo.length);        //console.log("DEPASSER");    }}function seekLyrics(time, debut, fin) {    var j = debut;    //console.log("Debut :" + debut + " Fin: " + fin);    while (j < fin && j < DataVideo.length) {        if (time >= formatTimeVideo(DataVideo[j].start) && time < formatTimeVideo(DataVideo[j].end)) {            INDEX = j;            START = formatTimeVideo(DataVideo[INDEX].start);            END = formatTimeVideo(DataVideo[INDEX].end);            $('.sous-titre').html(DataVideo[INDEX].text);            // console.log(" Trouvé: j :" + j + " start " + DataVideo[j].start + " End " + DataVideo[j].end);            return true;        }        j++    }    return false;}function updateTimerDisplay() {    $('#current').text(formatTime(player.getCurrentTime()));    $('#duration').text(formatTime(player.getDuration()));}function formatTime(time) {    time = Math.round(time);    var minutes = Math.floor(time / 60),        seconds = time - minutes * 60;    seconds = seconds < 10 ? '0' + seconds : seconds;    return minutes + ":" + seconds;}$("#Signaler").click(function (e) {    var pst = player.getPlayerState();    if (pst == 0 || pst == 2 || pst == 5) {        player.playVideo();    } else if (pst == 1) {        player.pauseVideo();    }    e.preventDefault();});